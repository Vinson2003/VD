<script>
    function DateOption(parentEl = "body",
        minDate = moment().subtract('50', 'years').format("MM/DD/YYYY"),
        maxDate = moment().add('50', 'years').format("MM/DD/YYYY"),
        startDate = moment().format("DD/MM/YYYY"),
        endDate = moment().format("DD/MM/YYYY"),
    ) {
        return {
            drops: 'auto',
            parentEl: parentEl,
            minDate: minDate,
            maxDate: maxDate,
            startDate: startDate,
            endDate: endDate,
            showDropdowns: true,
            autoUpdateInput: false,
            singleDatePicker: true,
        };
    }
</script>

<script>
    $(document).ready(function () {
        $('#TrancAddModal').on('shown.bs.modal', function () {
            $('#TDate').daterangepicker(DateOption("#TrancAddModal"));
            $('#TDate').on('cancel.daterangepicker', function (ev, picker) { $(this).val(''); });
            $('#TDate').on('apply.daterangepicker', function (e, picker) { $(this).val(picker.startDate.format('DD/MM/YYYY')); });
        });

        $('#TrancAddModal').on('hidden.bs.modal', function () {
            $("#TrancAddForm")[0].reset();
        });
    });
</script>

<script>
    function submitTrancAdd() {
        if (!$('#TrancAddForm')[0].checkValidity()) {
            $("#TrancAddForm")[0].reportValidity();
            return false;
        }

        Swal.fire({
            title: 'Are you sure?',
            icon: 'warning',
            showCancelButton: true,
            cancelButtonText: 'No',
            confirmButtonText: 'Yes'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: "@Url.Action("Create", "Transaction")",
                    data: $('#TrancAddForm').serialize(),
                    type: "POST",
                    success: function (result) {
                        if (result == true || result && result > 0) {
                            $('#TrancAddModal').modal('hide');
                            Swal.fire(msg, '', 'success');
                            reloadTable();
                        }
                        else if (typeof result === 'string') { Swal.fire(result, '', 'error'); }
                        else if (result && result.length > 0) { Swal.fire(result[0], '', 'error'); }
                        else { Swal.fire('', '', 'error'); }
                    },
                });
            }
        });
    }
</script>